# https://caddyserver.com/docs/caddyfile
{
    # Debug mode (disable it in production!)
    debug
    # HTTP/3 support
    experimental_http3
}

:80 {
    # self-signed certificate if https enabled
    tls internal

    log {
        level warn
    }

    route {
        redir / /.well-known/mercure/ui/
        encode gzip

        # https://mercure.rocks/docs/hub/config
        mercure {
            # Enable the demo endpoint (disable it in production!)
            demo
            # Publisher JWT key
            publisher_jwt "PG6@rJ14PRWM&P9FE1GwWipH5rnrmI8x"
            # CORS
            cors_origins *
            # Allow anonymous subscribers
            anonymous
        }

        respond "Not Found" 404
    }
}
